import{r as e,i as a,d as t,o as l,a as n,b as r,e as i,w as o,g as s}from"./index.23564e4b.js";import{w as p}from"./index.7506ac0b.js";import{F as d}from"./FileSaver.min.35949a15.js";import{u as c,w as g}from"./xlsx.030dfc28.js";const u={class:"container"},w=s("  "),h=s("导出"),b={class:"pagination"},m={name:"Text",setup(s){const m=e({address:"",name:"",pageIndex:1,pageSize:5});let x=e([]);const f=a([]),v=a(0),y=(e,a)=>{return(t=e.RecordLog,t.length?t[t.length-1]:null)[a.property];var t},S=()=>{let e=document.getElementById("ou"),a=c.table_to_book(e);var t=g(a,{bookType:"xlsx",bookSST:!0,type:"array"});try{d.saveAs(new Blob([t],{type:"application/octet-stream"}),"sheetjs.xlsx")}catch(l){"undefined"!=typeof console&&console.log(l,t)}return t},z=async()=>{try{const e=await p.record_page({page_num:m.pageIndex,page_size:m.pageSize});console.log(e.res),x=e.res.data,v.value=e.res.total,_.material_len=x.length;let a=[];x.forEach((e=>{a.push(...e)})),f.value=a}catch(e){console.log(e)}};z();const _={i:0,newrowindex:0,material_len:0},C=({rowIndex:e,columnIndex:a})=>{let t=x[_.i].length;if(13===a&&_.newrowindex++,a<10){if(0!==Math.floor(_.newrowindex/t))return _.newrowindex-=t,_.i=(_.i+1)%_.material_len,t=x[_.i].length,[t,1];if(_.newrowindex%t==0)return[t,1];if(_.newrowindex<t)return[0,0]}},I=e=>{m.pageIndex=e,_.i=0,_.newrowindex=0,z()},T=e=>{m.pageSize=e,_.i=0,_.newrowindex=0,z()};return a(!1),e({name:"",address:""}),(e,a)=>{const s=t("el-button"),p=t("el-table-column"),d=t("el-table"),c=t("el-pagination");return l(),n("div",null,[r("div",u,[w,i(s,{onClick:S,type:"success",round:""},{default:o((()=>[h])),_:1}),i(d,{id:"ou",data:f.value,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header",stripe:"","span-method":C},{default:o((()=>[i(p,{prop:"MaterialType",label:"供应类型",width:"80",align:"center"}),i(p,{prop:"MaterialCode",label:"物料编码",width:"150",align:"center"}),i(p,{prop:"MaterialName",label:"物料名称",width:"80",align:"center"}),i(p,{prop:"Specifications",label:"规格型号 ",width:"140",align:"center"}),i(p,{prop:"Supplier",label:"供应商",width:"80",align:"center"}),i(p,{prop:"Craft",label:"工艺",width:"150",align:"center"}),i(p,{prop:"Texture",label:"材质",width:"100",align:"center"}),i(p,{prop:"Process",label:"工序",width:"50",align:"center"}),i(p,{prop:"PurchaseStatus",label:"采购状态",width:"150",align:"center"}),i(p,{prop:"ReceivingWarehouse",label:"收料仓库",width:"100",align:"center"}),i(p,{prop:"WeighStage",label:"称重状态",width:"100",align:"center"}),i(p,{prop:"CalPerson",label:"结算人",width:"100",align:"center",formatter:y}),i(p,{prop:"CalWeight",label:"结算重量",width:"80",align:"center",formatter:y}),i(p,{prop:"CalTime",label:"执行日期",width:"100",align:"center",formatter:y})])),_:1},8,["data"]),r("div",b,[i(c,{background:"",layout:"total, prev, pager, next, sizes","current-page":m.pageIndex,"page-size":m.pageSize,"page-sizes":[5,10,20,50],total:v.value,onSizeChange:T,onCurrentChange:I},null,8,["current-page","page-size","total"])])])])}}};export{m as default};
