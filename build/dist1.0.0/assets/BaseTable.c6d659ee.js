import{l as e,r as a,i as n,d as r,o as l,a as t,b as i,e as o,w as p}from"./index.23564e4b.js";import{w as s}from"./index.7506ac0b.js";import"./FileSaver.min.35949a15.js";const d={class:"container"},g={class:"pagination"},c=e({name:"BaseTable",setup(e){const c=a({address:"",name:"",pageIndex:1,pageSize:10});let w=a([]);const u=n([]),h=n(0),m=(e,a)=>{return(n=e.RecordLog,n.length?n[n.length-1]:null)[a.property];var n},b=async()=>{try{const e=await s.record_page({page_num:c.pageIndex,page_size:c.pageSize});console.log(e.res),w=e.res.data,h.value=e.res.total,x.material_len=w.length;let a=[];w.forEach((e=>{a.push(...e)})),u.value=a}catch(e){console.log(e)}};b();const x={i:0,newrowindex:0,material_len:0},f=({row:e,column:a,rowIndex:n,columnIndex:r})=>{let l=w[x.i].length;if(9===r&&x.newrowindex++,r<6){if(0!==Math.floor(x.newrowindex/l))return x.newrowindex-=l,x.i=(x.i+1)%x.material_len,l=w[x.i].length,[l,1];if(x.newrowindex%l==0)return[l,1];if(x.newrowindex<l)return[0,0]}},v=e=>{c.pageIndex=e,x.i=0,x.newrowindex=0,b()},z=e=>{c.pageSize=e,x.i=0,x.newrowindex=0,b()};return n(!1),a({name:"",address:""}),(e,a)=>{const n=r("el-table-column"),s=r("el-table"),w=r("el-pagination");return l(),t("div",null,[i("div",d,[o(s,{id:"ou",data:u.value,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header",stripe:"","span-method":f},{default:p((()=>[o(n,{prop:"MaterialCode",label:"物料编码",width:"150",align:"center"}),o(n,{prop:"MaterialName",label:"物料名称",width:"80",align:"center"}),o(n,{prop:"Specifications",label:"规格型号 ",width:"140",align:"center"}),o(n,{prop:"Craft",label:"工艺",width:"150",align:"center"}),o(n,{prop:"Texture",label:"材质",width:"100",align:"center"}),o(n,{prop:"Process",label:"工序",width:"50",align:"center"}),o(n,{prop:"Supplier",label:"供应商",width:"80",align:"center"}),o(n,{prop:"CalPerson",label:"结算人",width:"100",align:"center",formatter:m}),o(n,{prop:"CalWeight",label:"结算重量",width:"80",align:"center",formatter:m}),o(n,{prop:"CalTime",label:"执行日期",width:"100",align:"center",formatter:m})])),_:1},8,["data"]),i("div",g,[o(w,{background:"",layout:"total, prev, pager, next, sizes","current-page":c.pageIndex,"page-size":c.pageSize,"page-sizes":[5,10,20,50],total:h.value,onSizeChange:z,onCurrentChange:v},null,8,["current-page","page-size","total"])])])])}}});export{c as default};
