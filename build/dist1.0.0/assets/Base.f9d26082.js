import{b as e}from"./index.7506ac0b.js";import{_ as l,Z as a,r as t,i as s,d as r,o,a as i,b as n,e as c,w as u,F as d,j as p,t as f,u as m,p as b,f as g,g as x,k as y}from"./index.23564e4b.js";const v=e=>(b("data-v-12ea7590"),e=e(),g(),e),h={class:"container"},_={style:{display:"flex","flex-wrap":"wrap"}},k={class:"card-header"},w=v((()=>n("span",null,"工艺",-1))),C=v((()=>n("span",{style:{"font-size":"5px",color:"#bbb"}},"tips:双击文本编辑",-1))),I=["data-obj"],j=["onDblclick"],z=v((()=>n("i",{class:"el-icon-lx-delete",style:{position:"absolute",right:"0"}},null,-1))),D=v((()=>n("hr",{class:"hr",style:{"margin-top":"10px"}},null,-1))),N={class:"card-header"},S=v((()=>n("span",null,"材质",-1))),T=v((()=>n("span",{style:{"font-size":"5px",color:"#bbb"}},"tips:双击文本编辑",-1))),V=["data-obj"],J=["onDblclick"],O=v((()=>n("i",{class:"el-icon-lx-delete",style:{position:"absolute",right:"0"}},null,-1))),$=v((()=>n("hr",{class:"hr",style:{"margin-top":"10px"}},null,-1))),q={class:"card-header"},A=v((()=>n("span",null,"工序",-1))),E=v((()=>n("span",{style:{"font-size":"5px",color:"#bbb"}},"tips:双击文本编辑",-1))),H=["data-obj"],L=["onDblclick"],M=v((()=>n("i",{class:"el-icon-lx-delete",style:{position:"absolute",right:"0"}},null,-1))),R=v((()=>n("hr",{class:"hr",style:{"margin-top":"10px"}},null,-1))),U={class:"card-header"},B=v((()=>n("span",null,"工艺",-1))),F=v((()=>n("span",{style:{"font-size":"5px",color:"#bbb"}},"tips:双击文本编辑",-1))),Z=["data-obj"],G=["onDblclick"],K=v((()=>n("i",{class:"el-icon-lx-delete",style:{position:"absolute",right:"0"}},null,-1))),P=v((()=>n("hr",{class:"hr",style:{"margin-top":"10px"}},null,-1))),Q={class:"dialog-footer"},W=x("取 消"),X=x("确 定");var Y=l({name:"Base",setup(l){const b=a.service({fullscreen:!1}),g=t({}),x=s(!1);let v=t({name:"",value:"",url:""});const Y={value:[{required:!0,message:"输入不能为空",trigger:"blur"}]},ee=s(null),le=(e,l)=>{v.name=e.currentTarget.previousElementSibling.innerHTML,v.queryurl=l,v.value="",x.value=!0},ae=()=>{ee.value.validate((async l=>{if(!l)return!1;{console.log(v);let l={name:v.value};const a=await e.weight_parameter(v.queryurl,"post",l);console.log(a),a.status?(te(),y.success("新增成功！"),x.value=!1):y.error(a.res)}}))},te=async()=>{let l=e.weight_parameter("craft","get"),a=e.weight_parameter("texture","get"),t=e.weight_parameter("process","get"),s=e.weight_parameter("purchase_status","get");g.craft=(await l).res,g.texture=(await a).res,g.process=(await t).res,g.purchase_status=(await s).res,b.close()};te();const se=(l,a,t)=>{console.log(l.target),l.target.children;let s=l.target;s.getAttribute("data-obj");let r=s.innerText,o=document.createElement("input");o.type="text",o.value=r,s.innerHTML="",s.appendChild(o),o.setSelectionRange(0,r.length),o.focus(),o.onblur=async function(){if(this.value==r||""==this.value)s.innerText=r,console.log(navigator.userAgent);else{s.innerText=this.value,console.log(this.value);let l={name:this.value,client_id:navigator.userAgent};const r=await e.weight_parameter(`${t}/${a}`,"put",l);r.status?y.success("修改成功！"):y.error(r.res)}}},re=async(l,a)=>{console.log(l);const t=await e.weight_parameter(`${a}/${l}`,"delete");t.status?(y.success("删除成功！"),te()):y.error(t.res)};return(e,l)=>{const a=r("el-popconfirm"),t=r("el-card"),s=r("el-space"),b=r("el-input"),y=r("el-form-item"),te=r("el-button"),oe=r("el-form"),ie=r("el-dialog");return o(),i("div",null,[n("div",h,[n("div",_,[c(s,{wrap:"",style:{display:"block"}},{default:u((()=>[c(t,{class:"box-card"},{header:u((()=>[n("div",k,[w,n("i",{class:"el-icon-lx-add",onClick:l[0]||(l[0]=e=>le(e,"craft")),style:{"font-size":"35px"}})]),C])),default:u((()=>[n("div",null,[(o(!0),i(d,null,p(g.craft,(l=>(o(),i("div",{"data-obj":JSON.stringify(e.o),key:l.Id,class:"text item",style:{position:"relative","margin-bottom":"12px"}},[n("span",{onDblclick:e=>se(e,l.Id,"craft")},f(l.Name),41,j),c(a,{title:"确定要删除吗？",onConfirm:e=>re(l.Id,"craft")},{reference:u((()=>[z])),_:2},1032,["onConfirm"]),D],8,I)))),128))])])),_:1})])),_:1}),c(s,{wrap:"",style:{display:"block"}},{default:u((()=>[c(t,{class:"box-card"},{header:u((()=>[n("div",N,[S,n("i",{class:"el-icon-lx-add",onClick:l[1]||(l[1]=e=>le(e,"texture")),style:{"font-size":"35px"}})]),T])),default:u((()=>[n("div",null,[(o(!0),i(d,null,p(g.texture,(l=>(o(),i("div",{"data-obj":JSON.stringify(e.o),key:l.Id,class:"text item",style:{position:"relative","margin-bottom":"12px"}},[n("span",{onDblclick:e=>se(e,l.Id,"texture")},f(l.Name),41,J),c(a,{title:"确定要删除吗？",onConfirm:e=>re(l.Id,"texture")},{reference:u((()=>[O])),_:2},1032,["onConfirm"]),$],8,V)))),128))])])),_:1})])),_:1}),c(s,{wrap:"",style:{display:"block"}},{default:u((()=>[c(t,{class:"box-card"},{header:u((()=>[n("div",q,[A,n("i",{class:"el-icon-lx-add",onClick:l[2]||(l[2]=e=>le(e,"process")),style:{"font-size":"35px"}})]),E])),default:u((()=>[n("div",null,[(o(!0),i(d,null,p(g.process,(l=>(o(),i("div",{"data-obj":JSON.stringify(e.o),key:l.Id,class:"text item",style:{position:"relative","margin-bottom":"12px"}},[n("span",{onDblclick:e=>se(e,l.Id,"process")},f(l.Name),41,L),c(a,{title:"确定要删除吗？",onConfirm:e=>re(l.Id,"process")},{reference:u((()=>[M])),_:2},1032,["onConfirm"]),R],8,H)))),128))])])),_:1})])),_:1}),c(s,{wrap:"",style:{display:"block"}},{default:u((()=>[c(t,{class:"box-card"},{header:u((()=>[n("div",U,[B,n("i",{class:"el-icon-lx-add",onClick:l[3]||(l[3]=e=>le(e,"purchase_status")),style:{"font-size":"35px"}})]),F])),default:u((()=>[n("div",null,[(o(!0),i(d,null,p(g.purchase_status,(l=>(o(),i("div",{"data-obj":JSON.stringify(e.o),key:l.Id,class:"text item",style:{position:"relative","margin-bottom":"12px"}},[n("span",{onDblclick:e=>se(e,l.Id,"purchase_status")},f(l.Name),41,G),c(a,{title:"确定要删除吗？",onConfirm:e=>re(l.Id,"purchase_status")},{reference:u((()=>[K])),_:2},1032,["onConfirm"]),P],8,Z)))),128))])])),_:1})])),_:1})]),c(ie,{title:"新增",modelValue:x.value,"onUpdate:modelValue":l[6]||(l[6]=e=>x.value=e),width:"30%"},{default:u((()=>[c(oe,{ref_key:"formRef",ref:ee,rules:Y,model:m(v),"label-width":"70px"},{default:u((()=>[c(y,{label:m(v).name,prop:"value"},{default:u((()=>[c(b,{modelValue:m(v).value,"onUpdate:modelValue":l[4]||(l[4]=e=>m(v).value=e)},null,8,["modelValue"])])),_:1},8,["label"]),c(y,null,{default:u((()=>[n("span",Q,[c(te,{onClick:l[5]||(l[5]=e=>x.value=!1)},{default:u((()=>[W])),_:1}),c(te,{type:"primary",onClick:ae},{default:u((()=>[X])),_:1})])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])])}}},[["__scopeId","data-v-12ea7590"]]);export{Y as default};
