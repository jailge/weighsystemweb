import{_ as e,y as a,r as s,i as o,z as r,d as l,o as t,a as n,b as c,e as d,w as m,A as u,k as p,p as i,f as g,g as f}from"./index.23564e4b.js";import{s as b}from"./index.7506ac0b.js";const w={setup(){const e=a(),l=s({account:"gfj",password:"123456"}),t=o(null);return r().commit("clearTags"),{param:l,rules:{account:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},login:t,submitForm:()=>{t.value.validate((async a=>{if(!a)return p.error("登录异常"),console.log(111),!1;console.log(l);try{const a=await b(l);a.token?(console.log(a.token),console.log(),p.success("登陆成功"),localStorage.setItem("ms_username",l.account),localStorage.setItem("ms_token",a.token),e.push("/text")):p.error(a.msg)}catch(s){p.error(s.message)}}))}}}},_={class:"login-wrap"},v={class:"ms-login"},k=(e=>(i("data-v-8ad91f9c"),e=e(),g(),e))((()=>c("div",{class:"ms-title"},"物料称重系统",-1))),y={class:"login-btn"},V=f("登录");var h=e(w,[["render",function(e,a,s,o,r,p){const i=l("el-button"),g=l("el-input"),f=l("el-form-item"),b=l("el-form");return t(),n("div",_,[c("div",v,[k,d(b,{model:o.param,rules:o.rules,ref:"login","label-width":"0px",class:"ms-content"},{default:m((()=>[d(f,{prop:"username"},{default:m((()=>[d(g,{modelValue:o.param.account,"onUpdate:modelValue":a[0]||(a[0]=e=>o.param.account=e),placeholder:"account"},{prepend:m((()=>[d(i,{icon:"el-icon-user"})])),_:1},8,["modelValue"])])),_:1}),d(f,{prop:"password"},{default:m((()=>[d(g,{type:"password",placeholder:"password",modelValue:o.param.password,"onUpdate:modelValue":a[1]||(a[1]=e=>o.param.password=e),onKeyup:a[2]||(a[2]=u((e=>o.submitForm()),["enter"]))},{prepend:m((()=>[d(i,{icon:"el-icon-lock"})])),_:1},8,["modelValue"])])),_:1}),c("div",y,[d(i,{type:"primary",onClick:a[3]||(a[3]=e=>o.submitForm())},{default:m((()=>[V])),_:1})])])),_:1},8,["model","rules"])])])}],["__scopeId","data-v-8ad91f9c"]]);export{h as default};
